# MIG

Hay varios problemas que pueden evitar que un [grupo de instancias administrado (MIG)](https://cloud.google.com/compute/docs/instance-groups?hl=es-419#managed_instance_groups) cree o vuelva a crear una instancia de VM de forma correcta.

### 1. **Cargas de trabajo *sin estado* (Stateless)**

**¿Qué significa?**

- La aplicación **no necesita recordar** nada de lo que pasó antes.
- Cada solicitud o tarea que maneja es **independiente** de las anteriores.
- Si una instancia de máquina virtual se elimina o falla, **no pasa nada grave**, simplemente otra instancia puede tomar el trabajo sin problema.

**Ejemplos:**

- Frontends de sitios web (por ejemplo, un servidor web que muestra contenido estático).
- Procesamiento por lotes donde las tareas no dependen entre sí (por ejemplo, procesar imágenes individualmente).
- APIs que solo responden a peticiones sin necesidad de recordar la sesión anterior.

**¿Por qué es ideal para MIG?**

- **MIG** puede automáticamente eliminar, reemplazar o escalar instancias sin preocuparse por perder información importante.

### 2. **Cargas de trabajo *con estado* (Stateful)**

**¿Qué significa?**

- La aplicación **sí necesita recordar** información anterior.
- Cada instancia tiene datos, configuraciones o sesiones **que no se deben perder** si la instancia se apaga o falla.
- Reemplazar o mover instancias debe hacerse con cuidado para **preservar esos datos**.

**Ejemplos:**

- Bases de datos (como MySQL, PostgreSQL).
- Aplicaciones que mantienen sesiones de usuario largas o estados de procesamiento complejos.
- Procesos batch de larga duración que deben guardar "puntos de control" (checkpoints) en el medio para no empezar de cero si se detienen.

**¿Qué pasa con MIG aquí?**

- **MIG** también puede manejar cargas con estado, pero tienes que usar **MIG Stateful**, donde se configura explícitamente para **preservar discos** o **IP fijas** de las instancias al reemplazarlas.

**Soluciona problemas de grupos de instancias administrados**

## Borra un MIG

Cuando borras un grupo de instancias administrado, se borran todas las VM del grupo. Si deseas conservar alguna de las VM, primero [descarta las VM](https://cloud.google.com/compute/docs/instance-groups/add-remove-vms-in-mig?hl=es-419#abandoning_instances) para quitarlas del grupo. Luego, borra el grupo de instancias administrado.

Los discos en un MIG se borran solo si estableciste la propiedad de eliminación automática del disco como verdadera cuando definiste los discos en la plantilla de instancias del MIG. Si la propiedad de eliminación automática de un disco se establece como falsa, puedes limpiar los discos de forma manual cuando ya no los necesites.